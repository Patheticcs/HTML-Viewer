<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Synprev</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/codemirror.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/theme/nord.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.5/theme/monokai.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.5/theme/material.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.5/theme/dracula.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.5/theme/tomorrow-night-bright.css">
    <style>
      :root {
        --primary-bg: #0f172a;
        --secondary-bg: #1e293b;
        --accent-color: #3b82f6;
        --accent-hover: #2563eb;
        --text-primary: #f1f5f9;
        --text-secondary: #94a3b8;
        --border-color: #334155;
        --error-color: #ef4444;
        --success-color: #22c55e;
        --warning-color: #f59e0b;
        --panel-bg: rgba(30, 41, 59, 0.95);
        --glass-bg: rgba(255, 255, 255, 0.05);
        --shadow-sm: 0 1px 2px 0 rgb(0 0 0 / 0.05);
        --shadow-md: 0 4px 6px -1px rgb(0 0 0 / 0.1);
        --shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.1)
      }

      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        font-family: 'Inter var', system-ui, sans-serif
      }

      body {
        height: 100vh;
        background: var(--primary-bg);
        color: var(--text-primary);
        display: flex;
        flex-direction: column;
        overflow: hidden
      }

      .header {
        background: var(--secondary-bg);
        padding: 1rem 1.5rem;
        border-bottom: 1px solid var(--border-color);
        display: flex;
        justify-content: space-between;
        align-items: center;
        box-shadow: var(--shadow-sm);
        backdrop-filter: blur(8px)
      }

      .logo {
        font-size: 1.5rem;
        font-weight: 700;
        background: linear-gradient(135deg, var(--accent-color), #818cf8);
        -webkit-background-clip: text;
        color: transparent;
        display: inline-flex;
        align-items: center;
        gap: .5rem
      }

      .toolbar {
        background: var(--secondary-bg);
        padding: .75rem 1rem;
        display: flex;
        gap: 1rem;
        border-bottom: 1px solid var(--border-color);
        align-items: center;
        flex-wrap: wrap;
        backdrop-filter: blur(8px)
      }

      .toolbar-group {
        display: flex;
        gap: .5rem;
        align-items: center
      }

      .toolbar-group:not(:last-child) {
        padding-right: 1rem;
        border-right: 1px solid var(--border-color)
      }

      .button {
        padding: .5rem 1rem;
        background: var(--glass-bg);
        border: 1px solid var(--border-color);
        color: var(--text-primary);
        border-radius: .5rem;
        cursor: pointer;
        font-size: .875rem;
        font-weight: 500;
        transition: all .2s cubic-bezier(.4, 0, .2, 1);
        display: flex;
        align-items: center;
        gap: .5rem;
        box-shadow: var(--shadow-sm)
      }

      .button:hover {
        background: var(--accent-color);
        border-color: var(--accent-color);
        color: #fff;
        transform: translateY(-1px);
        box-shadow: var(--shadow-md)
      }

      .button:active {
        transform: translateY(0)
      }

      .button svg {
        width: 1rem;
        height: 1rem
      }

      .button.primary {
        background: var(--accent-color);
        border-color: var(--accent-color);
        color: #fff
      }

      .button.primary:hover {
        background: var(--accent-hover)
      }

      .main-content {
        flex: 1;
        display: flex;
        overflow: hidden
      }

      .split-view {
        display: flex;
        flex: 1;
        overflow: hidden;
        gap: 1px
      }

      .editors-container {
        flex: 1;
        display: flex;
        flex-direction: column;
        min-width: 300px;
        background: var(--primary-bg)
      }

      .tab-buttons {
        display: flex;
        background: var(--secondary-bg);
        padding: 0 .5rem;
        gap: .25rem;
        overflow-x: auto;
        scrollbar-width: none;
        border-bottom: 1px solid var(--border-color)
      }

      .tab-button {
        padding: .75rem 1.25rem;
        background: 0 0;
        border: none;
        color: var(--text-secondary);
        cursor: pointer;
        font-size: .875rem;
        transition: all .2s;
        border-bottom: 2px solid transparent;
        white-space: nowrap;
        display: flex;
        align-items: center;
        gap: .5rem;
        position: relative
      }

      .tab-button::after {
        content: '';
        position: absolute;
        bottom: -1px;
        left: 0;
        right: 0;
        height: 2px;
        background: var(--accent-color);
        transform: scaleX(0);
        transition: transform .2s
      }

      .tab-button:hover::after {
        transform: scaleX(.3)
      }

      .tab-button.active::after {
        transform: scaleX(1)
      }

      .tab-button.active {
        color: var(--text-primary);
        background: var(--glass-bg)
      }

      .editor-wrapper {
        flex: 1;
        position: relative;
        overflow: auto
      }

      .preview-container {
        flex: 1;
        background: #fff;
        position: relative;
        min-width: 300px;
        display: flex;
        flex-direction: column;
        box-shadow: var(--shadow-lg)
      }

      .preview-toolbar {
        background: var(--secondary-bg);
        padding: .75rem 1rem;
        display: flex;
        justify-content: space-between;
        align-items: center;
        border-bottom: 1px solid var(--border-color);
        backdrop-filter: blur(8px)
      }

      .device-selector {
        display: flex;
        gap: .5rem
      }

      .device-button {
        padding: .25rem .75rem;
        background: var(--glass-bg);
        border: 1px solid var(--border-color);
        color: var(--text-secondary);
        border-radius: .375rem;
        cursor: pointer;
        font-size: .75rem;
        transition: all .2s
      }

      .device-button.active {
        background: var(--accent-color);
        border-color: var(--accent-color);
        color: #fff
      }

      #preview {
        flex: 1;
        border: none;
        background: #fff;
        transition: all .3s ease
      }

      .resize-handle {
        width: 4px;
        background: var(--border-color);
        cursor: ew-resize;
        transition: background .2s
      }

      .resize-handle:hover {
        background: var(--accent-color)
      }

      .CodeMirror {
        height: 1101px;
        font-family: 'JetBrains Mono', 'Fira Code', monospace;
        font-size: .875rem;
        line-height: 1.6;
        padding: 1rem;
        overflow: hidden;
        position: relative
      }

      .editor-wrapper {
        overflow: auto;
        scrollbar-width: none;
        height: 100%
      }

      .editor-wrapper::-webkit-scrollbar {
        display: none
      }

      .notification {
        position: fixed;
        bottom: 1.5rem;
        right: 1.5rem;
        padding: 1rem 1.5rem;
        border-radius: .5rem;
        color: #fff;
        font-size: .875rem;
        display: flex;
        align-items: center;
        gap: .5rem;
        animation: slideIn .3s cubic-bezier(.4, 0, .2, 1);
        z-index: 1000;
        box-shadow: var(--shadow-lg);
        backdrop-filter: blur(8px)
      }

      .notification.error {
        background: var(--error-color)
      }

      .notification.success {
        background: var(--success-color)
      }

      .notification.warning {
        background: var(--warning-color)
      }

      .settings-panel {
        position: fixed;
        top: 0;
        right: -400px;
        width: 400px;
        height: 100vh;
        background: var(--panel-bg);
        backdrop-filter: blur(10px);
        border-left: 1px solid var(--border-color);
        padding: 24px;
        transition: right .3s ease;
        z-index: 1000;
        overflow-y: auto
      }

      .settings-panel.visible {
        right: 0
      }

      .settings-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 24px
      }

      .settings-section {
        margin-bottom: 24px
      }

      .settings-section h3 {
        color: var(--accent-color);
        margin-bottom: 16px;
        font-size: 1.1rem
      }

      .setting-item {
        margin-bottom: 16px
      }

      .setting-item label {
        display: block;
        margin-bottom: 8px;
        color: var(--text-secondary)
      }

      .setting-item input,
      .setting-item select {
        width: 100%;
        padding: 8px 12px;
        background: var(--primary-bg);
        border: 1px solid var(--border-color);
        color: var(--text-primary);
        border-radius: 6px;
        font-size: 14px
      }

      .keyboard-shortcuts {
        display: grid;
        grid-template-columns: auto 1fr;
        gap: 12px 24px
        overflow: auto;
      }

      .shortcut-key {
        padding: 4px 8px;
        background: var(--primary-bg);
        border-radius: 4px;
        font-size: 12px;
        color: var(--text-secondary)
      }

      @keyframes slideIn {
        from {
          transform: translateY(100%);
          opacity: 0
        }

        to {
          transform: translateY(0);
          opacity: 1
        }
      }

      @media (max-width:768px) {
        .split-view {
          flex-direction: column
        }

        .resize-handle {
          height: 4px;
          width: 100%;
          cursor: ns-resize
        }

        .editors-container,
        .preview-container {
          min-height: 300px;
          width: 100%
        }

        .settings-panel {
          width: 100%;
          right: -100%
        }

        .toolbar {
          padding: 8px
        }

        .toolbar-group {
          flex-wrap: wrap
        }

        .button {
          padding: 6px 12px;
          font-size: 13px
        }
      }
    </style>
  </head>
  <body>
    <div class="header">
      <div class="logo">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M16 18l6-6-6-6M8 6l-6 6 6 6" />
        </svg>Synprev
      </div>
      <div class="toolbar-group">
        <button class="button" id="shareBtn" title="Share">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8" />
            <polyline points="16 6 12 2 8 6" />
            <line x1="12" y1="2" x2="12" y2="15" />
          </svg>Share </button>
        <button class="button" id="settingsBtn" title="Settings">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="12" cy="12" r="3" />
            <path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-22h-.09a1.65 1.65 0 0 0-1.51 1z" />
          </svg>Settings </button>
      </div>
    </div>
    <div class="toolbar">
      <div class="toolbar-group">
        <button class="button primary" id="runBtn" title="Run (Ctrl+Enter)">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <polygon points="5 3 19 12 5 21 5 3" />
          </svg>Run </button>
        <button class="button" id="previewBtn" title="Open in New Window">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6" />
            <polyline points="15 3 21 3 21 9" />
            <line x1="10" y1="14" x2="21" y2="3" />
          </svg>Preview </button>
      </div>
      <div class="toolbar-group">
        <button class="button" id="clearBtn" title="Open in New Window">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M18 6V16.2C18 17.8802 18 18.7202 17.673 19.362C17.3854 19.9265 16.9265 20.3854 16.362 20.673C15.7202 21 14.8802 21 13.2 21H10.8C9.11984 21 8.27976 21 7.63803 20.673C7.07354 20.3854 6.6146 19.9265 6.32698 19.362C6 18.7202 6 17.8802 6 16.2V6M4 6H20M16 6L15.7294 5.18807C15.4671 4.40125 15.3359 4.00784 15.0927 3.71698C14.8779 3.46013 14.6021 3.26132 14.2905 3.13878C13.9376 3 13.523 3 12.6936 3H11.3064C10.477 3 10.0624 3 9.70951 3.13878C9.39792 3.26132 9.12208 3.46013 8.90729 3.71698C8.66405 4.00784 8.53292 4.40125 8.27064 5.18807L8 6" stroke-linecap="round" stroke-linejoin="round"></path>
          </svg>Clear </button>
        <button class="button" id="saveBtn" title="Download">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4" />
            <polyline points="7 10 12 15 17 10" />
            <line x1="12" y1="15" x2="12" y2="3" />
          </svg>Download </button>
      </div>
    </div>
    <div class="main-content">
      <div class="split-view">
        <div class="editors-container">
          <div class="tab-buttons">
            <button class="tab-button active" data-lang="html">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z" />
                <polyline points="13 2 13 9 20 9" />
              </svg>HTML </button>
            <button class="tab-button" data-lang="css">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z" />
                <polyline points="14 2 14 8 20 8" />
                <line x1="16" y1="13" x2="8" y2="13" />
                <line x1="16" y1="17" x2="8" y2="17" />
                <polyline points="10 9 9 9 8 9" />
              </svg>CSS </button>
            <button class="tab-button" data-lang="javascript">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z" />
                <polyline points="14 2 14 8 20 8" />
                <line x1="16" y1="13" x2="8" y2="13" />
                <line x1="16" y1="17" x2="8" y2="17" />
                <polyline points="10 9 9 9 8 9" />
              </svg>JavaScript </button>
          </div>
          <div class="editor-wrapper">
            <div id="editor"></div>
          </div>
        </div>
        <div class="resize-handle" id="resizeHandle"></div>
        <div class="preview-container">
          <div class="preview-toolbar">
            <div class="device-selector">
              <button class="device-button active" data-width="100%" data-height="100%">Desktop</button>
              <button class="device-button" data-width="768px" data-height="1024px">Tablet</button>
              <button class="device-button" data-width="375px" data-height="812px">Mobile</button>
            </div>
            <span id="previewSize"></span>
          </div>
          <iframe id="preview"></iframe>
        </div>
      </div>
    </div>
    <div class="settings-panel" id="settingsPanel">
      <div class="settings-header">
        <h2>Settings</h2>
        <button class="button" id="closeSettings">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="18" y1="6" x2="6" y2="18" />
            <line x1="6" y1="6" x2="18" y2="18" />
          </svg>
        </button>
      </div>
      <div class="settings-section">
        <h3>Editor</h3>
        <div class="setting-item">
          <label for="themeSelect">Theme</label>
          <select id="themeSelect">
            <option value="default">Default</option>
            <option value="nord">Nord</option>
            <option value="monokai">Monokai</option>
            <option value="material">Material</option>
            <option value="dracula">Dracula</option>
            <option value="tomorrow-night-bright">Tomorrow Night</option>
          </select>
        </div>
        <div class="setting-item">
          <label for="fontSizeSelect">Font Size</label>
          <select id="fontSizeSelect">
            <option value="12">12px</option>
            <option value="14" selected="selected">14px</option>
            <option value="16">16px</option>
            <option value="18">18px</option>
          </select>
        </div>
      </div>
      <div class="settings-section">
        <h3>Keyboard Shortcuts</h3>
        <div class="keyboard-shortcuts">
          <span class="shortcut-key">Ctrl + Enter</span>
          <span>Run Code</span>
          <span class="shortcut-key">Ctrl + S</span>
          <span>Save Changes</span>
          <span class="shortcut-key">Ctrl + /</span>
          <span>Toggle Comment</span>
          <span class="shortcut-key">Ctrl + Space</span>
          <span>Show Autocomplete</span>
        </div>
      </div>
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/codemirror.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/mode/xml/xml.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/mode/javascript/javascript.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/mode/css/css.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/mode/htmlmixed/htmlmixed.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/addon/edit/closetag.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/addon/edit/closebrackets.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/addon/edit/matchbrackets.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/addon/hint/show-hint.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/addon/hint/html-hint.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/addon/hint/css-hint.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/addon/hint/javascript-hint.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/addon/comment/comment.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
    <script>
      (function() {
        const state = {
          code: {
            html: '',
            css: '',
            javascript: ''
          },
          currentLang: 'html',
          editor: null,
          isUpdating: false,
          settings: {
            theme: 'default',
            fontSize: '14'
          }
        };
        state.editor = CodeMirror(document.getElementById('editor'), {
          mode: 'htmlmixed',
          theme: state.settings.theme,
          lineNumbers: true,
          autoCloseTags: true,
          autoCloseBrackets: true,
          matchBrackets: true,
          lineWrapping: true,
          tabSize: 2,
          indentWithTabs: false,
          extraKeys: {
            'Ctrl-Enter': () => document.getElementById('runBtn').click(),
            'Ctrl-S': (cm) => {
              showNotification('Changes saved!', 'success');
              return false;
            },
            'Ctrl-Space': 'autocomplete',
            'Ctrl-/': 'toggleComment'
          }
        });
        document.querySelector('.CodeMirror').style.fontSize = `${state.settings.fontSize}px`;

        function showNotification(message, type = 'success') {
          const notification = document.createElement('div');
          notification.className = `notification ${type}`;
          notification.textContent = message;
          document.body.appendChild(notification);
          setTimeout(() => {
            notification.remove();
          }, 3000);
        }

        function updatePreview(force = false) {
          if (state.isUpdating && !force) return;
          state.isUpdating = true;
          requestAnimationFrame(() => {
            try {
              const previewContent = `

											
											<!DOCTYPE html>
											<html>
												<head>
													<meta charset="UTF-8">
														<meta name="viewport" content="width=device-width, initial-scale=1.0">
															<style>${state.code.css || ''}</style>
														</head>
														<body>
              ${state.code.html || ''}

															
															<script>${state.code.javascript || ''}<\/script>
															</body>
														</html>`;
              const preview = document.getElementById('preview');
              const previewDoc = preview.contentDocument || preview.contentWindow.document;
              previewDoc.open();
              previewDoc.write(previewContent);
              previewDoc.close();
              updatePreviewSize();
              state.isUpdating = false;
            } catch (err) {
              console.error('Preview update error:', err);
              state.isUpdating = false;
              showNotification('Error updating preview', 'error');
            }
          });
        }

        function updatePreviewSize() {
          const preview = document.getElementById('preview');
          const previewSize = document.getElementById('previewSize');
          previewSize.textContent = `${preview.offsetWidth}x${preview.offsetHeight}`;
        }
        document.querySelectorAll('.tab-button').forEach(button => {
          button.addEventListener('click', () => {
            const lang = button.dataset.lang;
            if (state.currentLang === lang) return;
            state.code[state.currentLang] = state.editor.getValue();
            document.querySelector('.tab-button.active').classList.remove('active');
            button.classList.add('active');
            state.currentLang = lang;
            state.editor.setOption('mode', lang === 'html' ? 'htmlmixed' : lang);
            state.editor.setValue(state.code[lang] || '');
          });
        });
        state.editor.on('change', (cm) => {
          state.code[state.currentLang] = cm.getValue();
          updatePreview();
        });
        document.querySelectorAll('.device-button').forEach(button => {
          button.addEventListener('click', () => {
            document.querySelector('.device-button.active').classList.remove('active');
            button.classList.add('active');
            const preview = document.getElementById('preview');
            preview.style.width = button.dataset.width;
            preview.style.height = button.dataset.height;
            updatePreviewSize();
          });
        });
        const settingsPanel = document.getElementById('settingsPanel');
        const settingsBtn = document.getElementById('settingsBtn');
        const closeSettings = document.getElementById('closeSettings');
        settingsBtn.addEventListener('click', () => {
          settingsPanel.classList.add('visible');
        });
        closeSettings.addEventListener('click', () => {
          settingsPanel.classList.remove('visible');
        });
        const themeSelect = document.getElementById('themeSelect');
        themeSelect.value = state.settings.theme;
        themeSelect.addEventListener('change', (e) => {
          const theme = e.target.value;
          applyTheme(theme);
          state.settings.theme = theme;
        });
        const fontSizeSelect = document.getElementById('fontSizeSelect');
        fontSizeSelect.value = state.settings.fontSize;
        fontSizeSelect.addEventListener('change', (e) => {
          const fontSize = e.target.value;
          document.querySelector('.CodeMirror').style.fontSize = `${fontSize}px`;
          state.settings.fontSize = fontSize;
        });
        document.getElementById('runBtn').addEventListener('click', () => {
          state.code[state.currentLang] = state.editor.getValue();
          updatePreview(true);
          showNotification('Code executed!', 'success');
        });
        document.getElementById('previewBtn').addEventListener('click', () => {
          const win = window.open('', '_blank');
          win.document.write(`

														
														<!DOCTYPE html>
														<html>
															<head>
																<meta charset="UTF-8">
																	<meta name="viewport" content="width=device-width, initial-scale=1.0">
																		<style>${state.code.css || ''}</style>
																	</head>
																	<body>
              ${state.code.html || ''}

																		
																		<script>${state.code.javascript || ''}<\/script>
																		</body>
																	</html>`);
        });
        document.getElementById('clearBtn').addEventListener('click', () => {
          state.code = {
            html: '',
            css: '',
            javascript: ''
          };
          state.editor.setValue('');
          updatePreview(true);
          showNotification('All content cleared!', 'success');
        });
        document.getElementById('saveBtn').addEventListener('click', () => {
          const htmlContent = state.code.html || '';
          const cssContent = state.code.css || '';
          const javascriptContent = state.code.javascript || '';
          const zip = new JSZip();
          if (htmlContent) {
            zip.file('index.html', htmlContent);
          }
          if (cssContent) {
            zip.file('styles.css', cssContent);
          }
          if (javascriptContent) {
            zip.file('script.js', javascriptContent);
          }
          zip.generateAsync({
            type: 'blob'
          }).then(function(content) {
            const link = document.createElement('a');
            const url = URL.createObjectURL(content);
            link.href = url;
            link.download = 'project.zip';
            link.click();
            URL.revokeObjectURL(url);
            showNotification('Your files are being downloaded as a zip!', 'success');
          }).catch(function(err) {
            console.error('Error generating zip file:', err);
            showNotification('Error generating zip file', 'error');
          });
        });
        document.getElementById('shareBtn').addEventListener('click', async () => {
          try {
            const shareUrl = window.location.origin;
            await navigator.clipboard.writeText(shareUrl);
            showNotification('Domain URL copied to clipboard!', 'success');
          } catch (err) {
            showNotification('Error copying domain URL', 'error');
          }
        });

        function applyTheme(theme) {
          const themeColors = {
            nord: {
              '--primary-bg': '#2E3440',
              '--secondary-bg': '#3B4252',
              '--accent-color': '#88C0D0',
              '--text-primary': '#ECEFF4',
              '--text-secondary': '#D8DEE9',
              '--border-color': '#434C5E'
            },
            monokai: {
              '--primary-bg': '#272822',
              '--secondary-bg': '#383830',
              '--accent-color': '#F92672',
              '--text-primary': '#F8F8F2',
              '--text-secondary': '#75715E',
              '--border-color': '#3E3D32'
            },
            material: {
              '--primary-bg': '#263238',
              '--secondary-bg': '#37474F',
              '--accent-color': '#FF4081',
              '--text-primary': '#ECEFF1',
              '--text-secondary': '#B0BEC5',
              '--border-color': '#455A64'
            },
            dracula: {
              '--primary-bg': '#282a36',
              '--secondary-bg': '#44475a',
              '--accent-color': '#ff79c6',
              '--text-primary': '#f8f8f2',
              '--text-secondary': '#6272a4',
              '--border-color': '#6272a4'
            },
            'tomorrow-night-bright': {
              '--primary-bg': '#1d1f21',
              '--secondary-bg': '#282c34',
              '--accent-color': '#e0e0e0',
              '--text-primary': '#f0f0f0',
              '--text-secondary': '#b0b0b0',
              '--border-color': '#4e5b67'
            },
            default: {
              '--primary-bg': '#1a1b26',
              '--secondary-bg': '#24283b',
              '--accent-color': '#7aa2f7',
              '--text-primary': '#c0caf5',
              '--text-secondary': '#9aa5ce',
              '--border-color': '#414868'
            }
          };
          localStorage.setItem('selectedTheme', theme);
          state.editor.setOption('theme', theme);
        }
      })();
    </script>
  </body>
</html>
